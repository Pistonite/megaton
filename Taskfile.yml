version: '3'

includes:
  common:
    taskfile: packages/mono-dev/task/common.yaml
    optional: true
    flatten: true

  cli: { taskfile: packages/cli, dir: packages/cli, internal: true }

  # docs:
  #   taskfile: ./docs
  #   dir: ./docs

tasks:
  install-mono:
    - rm -rf packages/mono-dev
    - git clone https://github.com/Pistonight/mono-dev --depth 1 packages/mono-dev

  install-cargo-extra-tools:
    aliases: [icets]
    cmds:
      - task: cargo-binstall
        vars:
          PACKAGES: lisensor

  check:
    desc: run ALL of the checks
    cmds:
      - lisensor
      - task: cli:check

  build:
    desc: make sure everything can build
    cmds:
      - task: cli:build

  license:
    desc: check or fix license notices (-- -f to fix)
    cmds:
      - lisensor {{.CLI_ARGS}}

