version: '3'

tasks:
  configure:
    desc: (Re)-configure ninja build.
    dir: build
    cmds:
      - cargo run --bin megaton-lib-configure -- build.ninja
      - ninja -t compdb as cc cxx > compile_commands.json

  build:
    desc: Execute incremental builds
    cmds:
      - ninja -C build

  clean:
    desc: Clean build directory
    cmds:
      - rm -rf build/bin build/.cache
      - rm -f build/.ninja*
      - rm -f build/compile_commands.json


